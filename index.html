<!--
    ScribbleX -- Static Web Builder

    Developer Name: Kshitij S. Tyagi
    Contact: scribblex.dev@gmail.com
-->

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!--
        TITLE OF THE APP
    -->
    <title>
        web sandbox | scribbleX
    </title>
    <!--
        ==================================================================================================================
    -->

    <!--  CSS FILES LINKED HERE  -->
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/scrollbar.css">
    <link rel="stylesheet" href="css/input_color.css">
    <!--
        ==================================================================================================================
    -->

    <!--  FAVICON FILE LINKED HERE  -->
    <link rel="icon" type="image/x-icon" href="assets/fav/kt23.ico">

    
    <!--  JS LIBRARIES AND SCRIPTS  -->
    <script src="js/libraries/jQuery.js"></script>
    <script src="js/libraries/split.js"></script>
    <script src="js/libraries/sweetalert.js"></script>
    
    <script src="js/ace-builds-master/src/ace.js"></script>
    <script src="js/ace-builds-master/src/ext-language_tools.js"></script>
    <script src="js/ace-builds-master/src/mode-javascript.js"></script>

    <script src="js/src/init.js"></script>
    <!--<script src="js/src/builder_gui.js"></script>-->
    <!--
        ==================================================================================================================
    -->
    <style>
        @font-face {
            font-family: 'terminal';
            src: url('assets/');
            src: url('assets/?#iefix') format('embedded-opentype'),
                url('assets/fonts/terminal/terminal.woff2') format('woff2'),
                url('assets/fonts/terminal/terminal.woff') format('woff'),
                url('assets/fonts/terminal/terminal.ttf') format('truetype'),
            url('assets/fonts/terminal/terminal.svg#fonts/terminal/terminal') format('svg');
        }
    </style>

    <script>
        function get_db(db_val){
            // grab the value here from the browser and return the required value
        }

        function check_db(){
            let username = get_db("userid");
            let authkey = get_db("authkey");   
        }

        function create_db(db_name, db_val, time){
            // create cookie
            // FOllow the way below

            // db_name = db_val;
        }
    </script>

</head>
<body onload="init();" onresize="init();">
    <script>
        //  ON DETECTING CRTL + SHIFT + R --> inspector()
        var isCtrlHold = false;
        var isShiftHold = false;

        $(document).keyup(function (e) {
            if (e.which == 17) //17 is the code of Ctrl button
                isCtrlHold = false;
            if (e.which == 16) //16 is the code of Shift button
                isShiftHold = false;
        });
        $(document).keydown(function (e) {
            if (e.which == 17)
                isCtrlHold = true;
            if (e.which == 16)
                isShiftHold = true;
        
            ShortcutManager(e);
        });

        function ShortcutManager(e){
            if(isCtrlHold && isShiftHold && e.which == 82){
                e.preventDefault(); //prevent browser from the default behavior
                //alert("Ctrl+R is pressed");
                inspector();
            }
        }
    </script>
    <!--
        ==================================================================================================================
    -->
    <div id="main_container">   <!--  THIS IS THE MAIN CONTAINER OF THE APP  -->
        <div id="top_header">
            &nbsp;
            <img src="assets/logo/logox.png" alt="scribbleX"
                style="height: 100%; width: 215px; cursor: pointer;"
            >
        </div>
        <div id="appContainer">
            <div id="leftContainer" style="outline-style: solid; outline-color: rgb(127, 0, 115); outline-width: 1px; outline-offset: -2px;">
                <div id="leftContainer_inner">
                    <img src="assets/icons/user.png" alt="User"
                    style="width: 34px; position: absolute; bottom: 10px; margin-left: auto; margin-right: auto; right: 0; padding-right: 8px; cursor: pointer;" title="User" onclick="connect_user();">
                </div>
            </div>

            <div id="centerContainer">
                <br>
                <br>
                <div id="save_container">
                    <center>
                        <button id="save_btn" onclick="savecode();">
                            Save
                        </button>
                    </center>
                </div>
                <div style="height: 15px; width: 100%; display: block;">
                    <!--
                        EMPTY SPACE
                    -->
                </div>
                <center><div id="meta_container">
                    <input type="text"
                        placeholder="Project Name: "
                        style="display: block; background-color: transparent;
                        color: white;
                        outline: none;
                        border-top-style: none;
                        border-right-style: none;
                        border-left-style: none;
                        border-bottom-color: purple;"
                        id="name" autocomplete="off"
                    >
                </div></center>
            </div>

            <div id="center_right_appContainer_gutter"></div>

            <div id="rightContainer">
                <div id="top_appContainer">
                    <div class="splitView_Tools">
                        <div id="toolsPanel">
                            <div id="toolsPanel_header">
                                <span style="color: white; font-size: 20px;">
                                    Tools
                                </span>
                            </div>
                            <div id="toolsPanel_container" style="color: white;">
                                <div style="display: inline-block; height: 100%; width: 2%;"></div>
                                <!--<button id="GUIEditor_Button">GUI Editor</button>-->
                                <!-- onclick="activateGUIEditor();" -->
                                <!--<span id="GUIEditor_stat">OFF</span>-->
                                <!--
                                <script>
                                    document.getElementById("GUIEditor_Button").addEventListener('click', ()=>{
                                        activateGUIEditor();
                                    });
                                </script>
                                -->
                                <div style="display: inline-block; height: 100%; width: 96%;">
                                    <br>
                                    <label for="elemHeihgt" style="font-size: 15px;">Height:</label>
                                    <input type="number" name="" id="elemHeight" step="0.01" value="" class="elemDim">
                                    <br>
                                    <br>
                                    <label for="elemWidth" style="font-size: 15px;">Width:</label>
                                    <input type="number" id="elemWidth" step="0.01" value="" class="elemDim">
                                    <br>
                                    <br>
                                    <br>
                                    <span style="font-size: 15px;">Background Color: </span><input type="color" name="" id="elemBGC" value="" onchange="bgcolor(this.value);" oninput="bgcolor(this.value);">
                                    <br>
                                    <br>
                                    <br>
                                    <span style="font-size: 15px;">Font Color: </span><input type="color" name="" id="elemFC" value="" onchange="fontColor(this.value);" oninput="fontColor(this.value);">
                                </div>
                            </div>
                            <div id="toolsPanel_footer"></div>
                        </div>
                        <div id="previewContainer">
                            <div id="searchBarBrowser">
                                &nbsp;&nbsp;
                                <img src="assets/icons/1647373505088.png" alt=""
                                    style="height: 100%;
                                            display: inline-block;
                                            cursor: pointer;"
                                title="Reload Page" onclick="inspector();">
                            </div>
                            <span id="previewContainer_text">
                                <br>
                                <br>
                                <br>
                                <br>
                                <br>
                                <center>
                                    <img src="assets/logo/logox.png" alt="" style="height: 80; width: 300px;">
                                    <br>
                                    <span>
                                        Preview Frame
                                    </span>
                                </center>
                            </span>
                            <iframe frameborder="0" hspace="0" vspace="0" marginheight="0" marginwidth="0" style="display: none; background-color: white;" id="previewFrame" class="previewFrame"></iframe>
                            <script>/*
                                setInterval(run_gui, 75);

                                var temp_storage = null;

                                function run_gui(){
                                    console.log("Running...")
                                    document.getElementById("previewFrame").contentWindow.document.addEventListener('mouseover', (event)=>{
                                        event.target.style.outline = "thin solid #0000FF";
                                    });
                                    document.getElementById("previewFrame").contentWindow.document.addEventListener('mouseout', (event)=>{
                                        event.target.style.outline = "thin none #0000FF";
                                    });

                                    document.getElementById("previewFrame").contentWindow.document.addEventListener('click', (event)=>{
                                        console.log(window.getComputedStyle(event.target).backgroundColor);
                                        var abc = window.getComputedStyle(event.target).backgroundColor;
                                        abc = abc.replace("rgb(", "");
                                        abc = abc.replace(")", "");
                                        var abc_array = abc.split(', ');
                                        //alert(abc_array[0]);
                                        //alert(abc_array[1]);
                                        //alert(abc_array[2]);

                                        console.log("RGB: " + rgbToHex(parseInt(abc_array[0]), parseInt(abc_array[1]), parseInt(abc_array[2])));
                                        document.getElementById("elemBGC").value = rgbToHex(parseInt(abc_array[0]), parseInt(abc_array[1]), parseInt(abc_array[2]));

                                        temp_storage = event.target;
                                    });

                                    var getChangeBGC = document.getElementById("elemBGC").value;
                                    temp_storage.style.backgroundColor = getChangeBGC;
                                }

                                function componentToHex(c) {
                                    var hex = c.toString(16);
                                    return hex.length == 1 ? "0" + hex : hex;
                                }

                                function rgbToHex(r, g, b) {
                                    return "#" + componentToHex(r) + componentToHex(g) + componentToHex(b);
                                }*/
                            </script>
                        </div>
                    </div>
                </div>

                <!--
                    <div id="appContainer_innerMargin"></div>
                -->

                <div id="bottom_appContainer" onresize="resizeAppFrames();">
                    <div class="splitView_Editors">
                        <div id="htmlContainer" class="splitEditor">
                            <div id="htmlHeader" class="editor_header">
                                <span style="color: red; font-size: 18px;">
                                    &nbsp;&nbsp;html.
                                </span>
                                <span style="float: right;">
                                    &nbsp;&nbsp;
                                </span>
                                <span title="New HTML"><img src="assets/icons/plus.png" alt="" style="float: right; height: 75%; cursor: pointer;"></span>
                            </div>
                            <div id="htmlEditorContainer" class="editorContainer">
                                <div id="htmlEditorChild" class="EditorChild"></div>
                            </div>
                        </div>
                        <div id="cssContainer" class="splitEditor">
                            <div id="cssHeader" class="editor_header">
                                <span style="color: blue; font-size: 18px;">
                                    &nbsp;&nbsp;css.
                                </span>
                                <span style="float: right;">
                                    &nbsp;&nbsp;
                                </span>
                                <span title="New CSS"><img src="assets/icons/plus.png" alt="" style="float: right; height: 75%; cursor: pointer;"></span>
                            </div>
                            <div id="cssEditorContainer" class="editorContainer">
                                <div id="cssEditorChild" class="EditorChild"></div>
                            </div>
                        </div>
                        <div id="jsContainer" class="splitEditor">
                            <div id="jsHeader" class="editor_header">
                                <span style="color: yellow; font-size: 18px;">
                                    &nbsp;&nbsp;js.
                                </span>
                                <span style="float: right;">
                                    &nbsp;&nbsp;
                                </span>
                                <span title="New JS"><img src="assets/icons/plus.png" alt="" style="float: right; height: 75%; cursor: pointer;"></span>
                            </div>
                            <div id="jsEditorContainer" class="editorContainer jsEditorContainer">
                                <div id="jsEditorChild" class="EditorChild"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div id="bottom_footer">
            <center><div style="color: rgb(136, 136, 136); font-size: 15px; font-family: 'terminal';">
                <span style="display: inline-block;">Made with </span>
                <img src="assets/icons/heart.png" alt="Love" style="width: 15px; display: inline-block;">
                <!--<span style="display: inline-block">by Kshitij S. Tyagi</span>-->
                <span> and Coffee</span>
            </div></center>
        </div>
    </div>

    <div id="connect_user" style="display: none;">
        <div id="login">
            <div id="login_topContainer">
                <div style="width: 100%; height: 15px; display: block;"></div>
                <img src="assets/icons/close.png" alt="close" style="float: right; padding-right: 15px; display: block; width: 35px; cursor: pointer;" onclick="close_connect();">
                <center>
                    <br><br><br>
                    <h2 style="color: rgb(2, 2, 224);">Login</h2>
                    <br>    
                <form><input type="text" placeholder="User ID" class="loginInp" autocomplete="off" spellcheck="false">
                <br>
                <br>
                <input type="password" placeholder="Password" class="loginInp" autocomplete="off" spellcheck="false"></form>
                <br>
                <br>
                <br>
                <span class="loginBtn" onclick="connect_exist();">Login</span>
                <br>
                <br>
                <br>
                <br>
                <span style="font-size: 17px;">Don't have an account? <span style="color: blue; text-decoration: underline; cursor: pointer;" onclick="createacc();">Create New Account.</span></span>
                </center>
            </div>
        </div>
    </div>

    <script src="js/src/script.js"></script>
    <script src="js/src/inspector.js"></script>
    <!--<script src="js/src/renderContent.js"></script>-->
    <script>
        function connect_user(){
            //var ex = check_db(); // check the cookies
            document.getElementById("connect_user").style.display = "block";
            document.getElementById("main_container").style.display = "none";
        }

        function close_connect(){
            document.getElementById("connect_user").style.display = "none";
            document.getElementById("main_container").style.display = "block";
        }

        function connect_exist(){
            var x = document.getElementsByClassName("loginInp");
            var username = String(x[0].value);
            var password = String(x[1].value);
            var connect = new XMLHttpRequest();
            var response = '';
            connect.onreadystatechange = function(){
                if(this.status == 200 && this.readyState == 4){
                    response = this.responseText;
                    if(response == "noexistance"){
                        swal("Oops!", x[0]+" is not registered.", "error");
                    }
                    else if(response == "inc_pass"){
                        swal("Oops!", "The password you entered is incorrect.", "error");
                    }
                    else if(response == "success"){
                        swal("Great!", "Login Successful", "good");
                    }
                    else{
                        alert(response);
                    }
                }
            };
            connect.open("GET", "https://dbmgr.scribblex.net/connect_exist.php?un="+username+"&pass="+password, true);
            connect.send();
            console.log("https://dbmgr.scribblex.net/connect_exist.php?un="+username+"&pass="+password);
        }
    </script>
</body>
</html>